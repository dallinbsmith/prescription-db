import{a as L}from"./chunk-5NR4SW4X.js";import{a as U,b as q,c as j,d as H,e as $,f as K,g as Y,h as G,i as Q,j as J,k as X}from"./chunk-3PASNWI6.js";import{$ as M,C as w,Da as z,E as x,G as b,I as D,J as _,L as P,M as S,N as h,O as i,P as o,R as O,S as p,T as d,U as l,V as u,W as V,Z as C,_ as f,ba as F,da as I,ea as A,k as R,n as E,o as v,p as T,pa as N,ra as W,t as g,ta as B,u as m,y as k,z as r}from"./chunk-XZK7E5S4.js";var y=class e{constructor(n){this.http=n}baseUrl=`${z.apiUrl}/state-regulations`;getAll=()=>this.http.get(this.baseUrl);getByState=n=>this.http.get(`${this.baseUrl}/state/${n}`);getById=n=>this.http.get(`${this.baseUrl}/${n}`);getStates=()=>this.http.get(`${this.baseUrl}/states`);create=n=>this.http.post(this.baseUrl,n);update=(n,t)=>this.http.patch(`${this.baseUrl}/${n}`,t);delete=n=>this.http.delete(`${this.baseUrl}/${n}`);static \u0275fac=function(t){return new(t||e)(E(B))};static \u0275prov=R({token:e,factory:e.\u0275fac,providedIn:"root"})};var et=(e,n)=>n.key,nt=(e,n)=>n.id;function ot(e,n){if(e&1){let t=O();i(0,"button",10),p("click",function(){g(t);let a=d();return m(a.openForm())}),l(1,"Add Regulation"),o()}}function it(e,n){if(e&1&&(i(0,"option",6),l(1),o()),e&2){let t=n.$implicit;b("value",t),r(),u(t)}}function at(e,n){e&1&&(i(0,"div",7),l(1,"Loading..."),o())}function rt(e,n){if(e&1&&(i(0,"p",17),l(1),o()),e&2){let t=d().$implicit;r(),u(t.description)}}function lt(e,n){if(e&1&&(i(0,"p",18),l(1),o()),e&2){let t=d().$implicit;r(),u(t.notes)}}function ct(e,n){if(e&1&&(i(0,"a",20),l(1,"Source"),o()),e&2){let t=d().$implicit;b("href",t.source_url,k)}}function st(e,n){if(e&1){let t=O();i(0,"button",22),p("click",function(){g(t);let a=d().$implicit,s=d(3);return m(s.deleteRegulation(a.id))}),l(1,"Delete"),o()}}function dt(e,n){if(e&1&&(i(0,"div",13)(1,"div",14)(2,"span",15),l(3),o(),i(4,"span",16),l(5),o()(),x(6,rt,2,1,"p",17)(7,lt,2,1,"p",18),i(8,"div",19),x(9,ct,2,1,"a",20)(10,st,2,0,"button",21),o()()),e&2){let t=n.$implicit,c=d(3);r(2),D("type-"+t.regulation_type.toLowerCase()),r(),V(" ",t.regulation_type," "),r(2),u(t.applies_to),r(),_(t.description?6:-1),r(),_(t.notes?7:-1),r(2),_(t.source_url?9:-1),r(),_(c.authService.isAdmin()?10:-1)}}function gt(e,n){if(e&1&&(i(0,"div",11)(1,"h2"),l(2),o(),S(3,dt,11,8,"div",13,nt),o()),e&2){let t=n.$implicit;r(2),u(t.key),r(),h(t.value)}}function mt(e,n){if(e&1){let t=O();i(0,"button",23),p("click",function(){g(t);let a=d(3);return m(a.openForm())}),l(1,"Add your first regulation"),o()}}function _t(e,n){if(e&1&&(i(0,"div",12)(1,"p"),l(2,"No regulations found."),o(),x(3,mt,2,0,"button"),o()),e&2){let t=d(2);r(3),_(t.authService.isAdmin()?3:-1)}}function pt(e,n){if(e&1&&(i(0,"div",8),S(1,gt,5,1,"div",11,et,!1,_t,4,1,"div",12),I(4,"keyvalue"),o()),e&2){let t=d();r(),h(A(4,1,t.getRegulationsByState()))}}function ut(e,n){if(e&1&&(i(0,"option",6),l(1),o()),e&2){let t=n.$implicit;b("value",t),r(),u(t)}}function Ct(e,n){if(e&1&&(i(0,"option",6),l(1),o()),e&2){let t=n.$implicit;b("value",t),r(),u(t)}}function ft(e,n){if(e&1){let t=O();i(0,"div",24),p("click",function(){g(t);let a=d();return m(a.closeForm())}),i(1,"div",25),p("click",function(a){return g(t),m(a.stopPropagation())}),i(2,"h2"),l(3,"Add State Regulation"),o(),i(4,"form",26),p("ngSubmit",function(){g(t);let a=d();return m(a.submitForm())}),i(5,"div",27)(6,"div",28)(7,"label"),l(8,"State"),o(),i(9,"select",29),M("ngModelChange",function(a){g(t);let s=d();return f(s.formData.state_code,a)||(s.formData.state_code=a),m(a)}),i(10,"option",5),l(11,"Select State"),o(),S(12,ut,2,2,"option",6,P),o()(),i(14,"div",28)(15,"label"),l(16,"Regulation Type"),o(),i(17,"select",30),M("ngModelChange",function(a){g(t);let s=d();return f(s.formData.regulation_type,a)||(s.formData.regulation_type=a),m(a)}),i(18,"option",5),l(19,"Select Type"),o(),S(20,Ct,2,2,"option",6,P),o()()(),i(22,"div",28)(23,"label"),l(24,"Applies To"),o(),i(25,"input",31),M("ngModelChange",function(a){g(t);let s=d();return f(s.formData.applies_to,a)||(s.formData.applies_to=a),m(a)}),o()(),i(26,"div",28)(27,"label"),l(28,"Description"),o(),i(29,"textarea",32),M("ngModelChange",function(a){g(t);let s=d();return f(s.formData.description,a)||(s.formData.description=a),m(a)}),o()(),i(30,"div",28)(31,"label"),l(32,"Source URL"),o(),i(33,"input",33),M("ngModelChange",function(a){g(t);let s=d();return f(s.formData.source_url,a)||(s.formData.source_url=a),m(a)}),o()(),i(34,"div",28)(35,"label"),l(36,"Internal Notes"),o(),i(37,"textarea",34),M("ngModelChange",function(a){g(t);let s=d();return f(s.formData.notes,a)||(s.formData.notes=a),m(a)}),o()(),i(38,"div",35)(39,"button",36),p("click",function(){g(t);let a=d();return m(a.closeForm())}),l(40,"Cancel"),o(),i(41,"button",37),l(42,"Save Regulation"),o()()()()()}if(e&2){let t=d();r(9),C("ngModel",t.formData.state_code),r(3),h(t.usStates),r(5),C("ngModel",t.formData.regulation_type),r(3),h(t.regulationTypes),r(5),C("ngModel",t.formData.applies_to),r(4),C("ngModel",t.formData.description),r(4),C("ngModel",t.formData.source_url),r(4),C("ngModel",t.formData.notes)}}var Mt=["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","DC"],Z=class e{stateRegulationsService=v(y);authService=v(L);regulations=w([]);loading=w(!0);selectedState="";showForm=!1;usStates=Mt;regulationTypes=["PROHIBITED","RESTRICTED","REQUIRES_LICENSE","ADDITIONAL_REQUIREMENTS"];formData={state_code:"",regulation_type:"",applies_to:"",description:"",source_url:"",notes:""};ngOnInit(){this.loadRegulations()}loadRegulations=()=>{this.loading.set(!0),(this.selectedState?this.stateRegulationsService.getByState(this.selectedState):this.stateRegulationsService.getAll()).subscribe({next:t=>{this.regulations.set(t),this.loading.set(!1)},error:()=>{this.loading.set(!1)}})};onStateChange=()=>{this.loadRegulations()};openForm=()=>{this.formData={state_code:this.selectedState||"",regulation_type:"",applies_to:"",description:"",source_url:"",notes:""},this.showForm=!0};closeForm=()=>{this.showForm=!1};submitForm=()=>{!this.formData.state_code||!this.formData.regulation_type||!this.formData.applies_to||this.stateRegulationsService.create(this.formData).subscribe({next:()=>{this.closeForm(),this.loadRegulations()}})};deleteRegulation=n=>{confirm("Are you sure you want to delete this regulation?")&&this.stateRegulationsService.delete(n).subscribe({next:()=>{this.loadRegulations()}})};getRegulationsByState=()=>{let n=new Map;for(let t of this.regulations()){let c=n.get(t.state_code)||[];n.set(t.state_code,[...c,t])}return n};static \u0275fac=function(t){return new(t||e)};static \u0275cmp=T({type:e,selectors:[["app-state-regulations"]],standalone:!0,features:[F],decls:17,vars:4,consts:[[1,"state-regulations-page"],[1,"page-header"],[1,"btn-add"],[1,"filter-section"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value"],[1,"loading"],[1,"regulations-list"],[1,"modal-overlay"],[1,"btn-add",3,"click"],[1,"state-group"],[1,"empty-state"],[1,"regulation-card"],[1,"regulation-header"],[1,"badge"],[1,"applies-to"],[1,"description"],[1,"notes"],[1,"regulation-footer"],["target","_blank","rel","noopener",3,"href"],[1,"btn-delete"],[1,"btn-delete",3,"click"],[3,"click"],[1,"modal-overlay",3,"click"],[1,"modal",3,"click"],[3,"ngSubmit"],[1,"form-row"],[1,"form-group"],["name","state_code","required","",3,"ngModelChange","ngModel"],["name","regulation_type","required","",3,"ngModelChange","ngModel"],["type","text","name","applies_to","placeholder","e.g., Schedule II, All Controlled Substances","required","",3,"ngModelChange","ngModel"],["name","description","rows","3","placeholder","Details about this regulation...",3,"ngModelChange","ngModel"],["type","url","name","source_url","placeholder","https://...",3,"ngModelChange","ngModel"],["name","notes","rows","2","placeholder","Notes for the team...",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",3,"click"],["type","submit"]],template:function(t,c){t&1&&(i(0,"div",0)(1,"header",1)(2,"div")(3,"h1"),l(4,"State Regulations"),o(),i(5,"p"),l(6,"Track state-specific pharmacy regulations across all 50 states"),o()(),x(7,ot,2,0,"button",2),o(),i(8,"div",3)(9,"select",4),M("ngModelChange",function(s){return f(c.selectedState,s)||(c.selectedState=s),s}),p("change",function(){return c.onStateChange()}),i(10,"option",5),l(11,"All States"),o(),S(12,it,2,2,"option",6,P),o()(),x(14,at,2,0,"div",7)(15,pt,5,3,"div",8),o(),x(16,ft,43,6,"div",9)),t&2&&(r(7),_(c.authService.isAdmin()?7:-1),r(2),C("ngModel",c.selectedState),r(3),h(c.usStates),r(2),_(c.loading()?14:15),r(2),_(c.showForm?16:-1))},dependencies:[W,N,X,K,G,Q,U,Y,q,j,J,$,H],styles:[".state-regulations-page[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1.5rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.75rem;color:#1a1a2e}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0 0;color:#6b7280}.page-header[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#4f46e5;color:#fff;border:none;border-radius:6px;cursor:pointer}.page-header[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]:hover{background:#4338ca}.filter-section[_ngcontent-%COMP%]{margin-bottom:1.5rem}.filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.75rem 1rem;border:1px solid #d1d5db;border-radius:6px;min-width:200px;font-size:1rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#6b7280}.state-group[_ngcontent-%COMP%]{margin-bottom:2rem}.state-group[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.25rem;color:#1a1a2e;margin:0 0 1rem;padding-bottom:.5rem;border-bottom:2px solid #e5e7eb}.regulation-card[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:1rem 1.5rem;margin-bottom:.75rem;box-shadow:0 1px 3px #0000001a}.regulation-card[_ngcontent-%COMP%]   .regulation-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:.5rem}.regulation-card[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{padding:.25rem .5rem;border-radius:4px;font-size:.75rem;font-weight:600}.regulation-card[_ngcontent-%COMP%]   .badge.type-prohibited[_ngcontent-%COMP%]{background:#fee2e2;color:#991b1b}.regulation-card[_ngcontent-%COMP%]   .badge.type-restricted[_ngcontent-%COMP%]{background:#fef3c7;color:#92400e}.regulation-card[_ngcontent-%COMP%]   .badge.type-requires_license[_ngcontent-%COMP%]{background:#dbeafe;color:#1e40af}.regulation-card[_ngcontent-%COMP%]   .badge.type-additional_requirements[_ngcontent-%COMP%]{background:#f3e8ff;color:#7c3aed}.regulation-card[_ngcontent-%COMP%]   .applies-to[_ngcontent-%COMP%]{font-weight:500;color:#1a1a2e}.regulation-card[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#374151;font-size:.875rem;margin:.5rem 0}.regulation-card[_ngcontent-%COMP%]   .notes[_ngcontent-%COMP%]{color:#6b7280;font-size:.875rem;font-style:italic;margin:.5rem 0}.regulation-card[_ngcontent-%COMP%]   .regulation-footer[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:.75rem}.regulation-card[_ngcontent-%COMP%]   .regulation-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4f46e5;text-decoration:none;font-size:.875rem}.regulation-card[_ngcontent-%COMP%]   .regulation-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.regulation-card[_ngcontent-%COMP%]   .regulation-footer[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{background:none;border:none;color:#dc2626;cursor:pointer;font-size:.875rem}.regulation-card[_ngcontent-%COMP%]   .regulation-footer[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]:hover{text-decoration:underline}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;background:#fff;border-radius:8px;box-shadow:0 1px 3px #0000001a}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#6b7280;margin:0 0 1rem}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;background:#4f46e5;color:#fff;border:none;border-radius:6px;cursor:pointer}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#4338ca}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.modal[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem;width:100%;max-width:600px;max-height:90vh;overflow-y:auto}.modal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.25rem;color:#1a1a2e}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#374151}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #d1d5db;border-radius:6px;font-size:.875rem;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f46e5}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;font-family:inherit}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.75rem;margin-top:1.5rem}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.75rem 1.5rem;border-radius:6px;cursor:pointer;font-size:.875rem}.form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background:#f3f4f6;border:1px solid #d1d5db;color:#374151}.form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover{background:#e5e7eb}.form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background:#4f46e5;border:none;color:#fff}.form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background:#4338ca}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.page-header[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{width:100%}.filter-section[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;min-width:auto}.regulation-card[_ngcontent-%COMP%]{padding:1rem}.regulation-card[_ngcontent-%COMP%]   .regulation-header[_ngcontent-%COMP%], .regulation-card[_ngcontent-%COMP%]   .regulation-footer[_ngcontent-%COMP%]{flex-wrap:wrap}.modal[_ngcontent-%COMP%]{margin:1rem;padding:1.5rem;max-height:calc(100vh - 2rem)}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})};export{Z as StateRegulationsComponent};
